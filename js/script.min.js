var writeUsLink=document.querySelector(".btn-write-us"),popupWriteUs=document.querySelector(".modal-write-us"),close=document.querySelector(".modal-close");if(popupWriteUs)var form=popupWriteUs.querySelector(".write-us-form"),yourName=popupWriteUs.querySelector("[name=name]"),yourEMail=popupWriteUs.querySelector("[name=e-mail]"),yourMessage=popupWriteUs.querySelector("[name=message]");var isStorageSupport=!0,storageName="",storageEMail="",mapLink=document.querySelector(".btn-popup-map"),popupMap=document.querySelector(".modal-map");if(popupMap)var closeMap=popupMap.querySelector(".modal-close");var buyButtons=document.querySelectorAll(".btn-buy"),popupCart=document.querySelector(".modal-cart");if(popupCart)var closeCart=popupCart.querySelector(".modal-close");var currentSlideIndex,currentSlide=document.querySelector(".catalog-item-promo-active"),sliderBtnNext=document.querySelector(".catalog-btn-next"),sliderBtnBack=document.querySelector(".catalog-btn-back"),sliderItems=document.querySelectorAll(".catalog-item-promo"),getCurrentSlideIndex=function(){for(var e=0;e<sliderItems.length;e++)sliderItems[e].classList.contains("catalog-item-promo-active")&&(currentSlideIndex=e)};getCurrentSlideIndex();var showNextSlide=function(){currentSlide.classList.remove("catalog-item-promo-active"),currentSlideIndex+1<sliderItems.length?currentSlideIndex+=1:currentSlideIndex=0,sliderItems[currentSlideIndex].classList.add("catalog-item-promo-active"),currentSlide=document.querySelector(".catalog-item-promo-active")},showPrevSlide=function(){currentSlide.classList.remove("catalog-item-promo-active"),currentSlideIndex-1>=sliderItems.length?currentSlideIndex-=1:currentSlideIndex=sliderItems.length-1,sliderItems[currentSlideIndex].classList.add("catalog-item-promo-active"),currentSlide=document.querySelector(".catalog-item-promo-active")};try{storageName=localStorage.getItem("yourName"),storageEMail=localStorage.getItem("yourEMail")}catch(e){isStorageSupport=!1}popupWriteUs&&(writeUsLink.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.add("modal-show"),storageName&&storageEMail?(yourName.value=storageName,yourEMail.value=storageEMail,yourMessage.focus()):storageName?(yourName.value=storageName,yourEMail.focus()):(storageEMail&&(yourEMail.value=storageEMail),yourName.focus())}),close.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.remove("modal-show"),popupWriteUs.classList.remove("modal-error")}),form.addEventListener("submit",function(e){yourName.value&&yourEMail.value&&yourMessage.value?isStorageSupport&&(localStorage.setItem("yourName",yourName.value),localStorage.setItem("yourEMail",yourEMail.value)):(e.preventDefault(),popupWriteUs.classList.remove("modal-error"),popupWriteUs.offsetWidth=popupWriteUs.offsetWidth,popupWriteUs.classList.add("modal-error"))})),window.addEventListener("keydown",function(e){27===e.keyCode&&popupWriteUs.classList.contains("modal-show")&&(e.preventDefault(),popupWriteUs.classList.remove("modal-show"),popupWriteUs.classList.remove("modal-error"))}),popupMap&&(mapLink.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal-show")})),window.addEventListener("keydown",function(e){27===e.keyCode&&popupMap.classList.contains("modal-show")&&(e.preventDefault(),popupMap.classList.remove("modal-show"))});for(var i=0;i<buyButtons.length;i++)buyButtons[i].addEventListener("click",function(e){e.preventDefault(),popupCart.classList.add("modal-show")});closeCart.addEventListener("click",function(e){e.preventDefault(),popupCart.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){popupCart.classList.contains("modal-show")&&(e.preventDefault(),popupCart.classList.remove("modal-show"))}),sliderBtnNext.addEventListener("click",function(){showNextSlide()}),sliderBtnBack.addEventListener("click",function(){showPrevSlide()});