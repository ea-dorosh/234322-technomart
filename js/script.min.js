var writeUsLink=document.querySelector(".btn-write-us"),popupWriteUs=document.querySelector(".modal-write-us"),close=document.querySelector(".modal-close"),form=popupWriteUs.querySelector(".write-us-form"),yourName=popupWriteUs.querySelector("[name=name]"),yourEMail=popupWriteUs.querySelector("[name=e-mail]"),yourMessage=popupWriteUs.querySelector("[name=message]"),isStorageSupport=!0,storageName="",storageEMail="",mapLink=document.querySelector(".btn-popup-map"),popupMap=document.querySelector(".modal-map"),closeMap=popupMap.querySelector(".modal-close"),buyButtons=document.querySelectorAll(".btn-buy"),popupCart=document.querySelector(".modal-cart"),closeCart=popupCart.querySelector(".modal-close");try{storageName=localStorage.getItem("yourName"),storageEMail=localStorage.getItem("yourEMail")}catch(e){isStorageSupport=!1}writeUsLink.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.add("modal-show"),storageName&&storageEMail?(yourName.value=storageName,yourEMail.value=storageEMail,yourMessage.focus()):storageName?(yourName.value=storageName,yourEMail.focus()):(storageEMail&&(yourEMail.value=storageEMail),yourName.focus())}),close.addEventListener("click",function(e){e.preventDefault(),popupWriteUs.classList.remove("modal-show"),popupWriteUs.classList.remove("modal-error")}),form.addEventListener("submit",function(e){yourName.value&&yourEMail.value&&yourMessage.value?isStorageSupport&&(localStorage.setItem("yourName",yourName.value),localStorage.setItem("yourEMail",yourEMail.value)):(e.preventDefault(),popupWriteUs.classList.remove("modal-error"),popupWriteUs.offsetWidth=popupWriteUs.offsetWidth,popupWriteUs.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupWriteUs.classList.contains("modal-show")&&(e.preventDefault(),popupWriteUs.classList.remove("modal-show"),popupWriteUs.classList.remove("modal-error"))}),mapLink.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("modal-show")}),closeMap.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&popupMap.classList.contains("modal-show")&&(e.preventDefault(),popupMap.classList.remove("modal-show"))});for(var i=0;i<buyButtons.length;i++)buyButtons[i].addEventListener("click",function(e){e.preventDefault(),popupCart.classList.add("modal-show")});closeCart.addEventListener("click",function(e){e.preventDefault(),popupCart.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){popupCart.classList.contains("modal-show")&&(e.preventDefault(),popupCart.classList.remove("modal-show"))});